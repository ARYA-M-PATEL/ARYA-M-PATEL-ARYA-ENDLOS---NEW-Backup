(()=>{var e={48:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PartnerValidation:()=>_});var i,s,o,r,a,c=n(688),l=n(915),d=n(720),h=n(724),u=n(809),v=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))},f=function(e,t,n,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(e,n):s?s.value=n:t.set(e,n),n},p=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class _{constructor(e){i.add(this),s.set(this,void 0),o.set(this,void 0),f(this,s,e,"f"),f(this,o,{},"f"),p(this,s,"f").eventsService.on(u.t.SelectionCreated).subscribe((e=>p(this,i,"m",r).call(this,e.body.selection)))}getValidationStatus(){var e;return v(this,void 0,void 0,(function*(){const t=(0,c.aj)(...Object.values(p(this,o,"f"))),n=yield(0,c.zq)(t,{defaultValue:[]}),i={isValid:!0,placements:[]};for(const t of n)t.optedIn&&t.placement&&(null===(e=t.errors)||void 0===e?void 0:e.length)&&(i.isValid=!1,i.placements.push({element:t.placement.element,errors:t.errors}),t.placement.send(d.bJ.PartnerValidationEvent.SHOW_PARTNER_VALIDATION_STATUS));return i}))}}s=new WeakMap,o=new WeakMap,i=new WeakSet,r=function(e){return v(this,void 0,void 0,(function*(){(yield e.getPlacements()).forEach((e=>{const t=new c.tq(1),n=p(this,i,"m",a).call(this,e).subscribe(t);p(this,o,"f")[e.id]=t,e.on(h.Xy.PLACEMENT_CLOSED).subscribe((()=>{delete p(this,o,"f")[e.id],n.unsubscribe()}))}))}))},a=function(e){return new c.y$((t=>{const n=(0,l.zG)((0,c.TS)((0,l.zG)(e.on(d.bJ.PartnerValidationEvent.OPT_IN_TO_PARTNER_VALIDATION))((0,l.UI)((()=>!0))),(0,l.zG)(e.on(h.Xy.DISPLAY_SETTINGS_SET))((0,l.UI)((()=>!1)))))((0,l.Ps)()),i=(0,l.zG)(n)((0,l.hX)((e=>!e)),(0,l.UI)((()=>({errors:[],placement:e,optedIn:!1})))),s=(0,l.zG)(e.on(d.bJ.PartnerValidationEvent.SET_PARTNER_VALIDATION_STATUS))((0,l.UI)((t=>({errors:t.body.errors,placement:e,optedIn:!0})))),o=(0,c.TS)(i,s).subscribe(t);return e.on(h.Xy.PLACEMENT_CLOSED).subscribe((()=>{t.next({placement:null,errors:[],optedIn:!1}),t.complete()})),()=>o.unsubscribe()}))}},809:(e,t,n)=>{"use strict";n.d(t,{t:()=>r,n:()=>o});var i=n(688),s=n(915);class o{constructor(){this._subject=new i.xQ,this._observable=this._subject.asObservable()}on(e){return(0,s.zG)(this._observable)((0,s.hX)((({event:t})=>e===t||"*"===e)))}emit(e,t){this._subject.next({event:e,body:t})}}const r={SelectionCreated:"SelectionCreated"}},720:(e,t,n)=>{"use strict";n.d(t,{IP:()=>r,bJ:()=>a});var i,s=Object.freeze({__proto__:null,CartEvent:{UPDATE_CART_ITEM_MESSAGE:"UPDATE_CART_ITEM_MESSAGE",UPSERT_ALERT:"UPSERT_ALERT",DELETE_ALERT:"DELETE_ALERT",UPSERT_DELIVERY_DETAILS:"UPSERT_DELIVERY_DETAILS"}}),o=Object.freeze({__proto__:null,PartnerMessage:{UpdateCartItem:"V2_UPDATE_CART_ITEM"},PlacementMessage:{CartItemUpdated:"V2_CART_ITEM_UPDATED"}}),r=(Object.freeze({__proto__:null,V1:s,V2:o}),Object.freeze({__proto__:null,Extension:{PartnerValidation:"PartnerValidation"}})),a=Object.freeze({__proto__:null,PartnerValidationEvent:{SET_PARTNER_VALIDATION_STATUS:"SET_PARTNER_VALIDATION_STATUS",OPT_IN_TO_PARTNER_VALIDATION:"OPT_IN_TO_PARTNER_VALIDATION",SHOW_PARTNER_VALIDATION_STATUS:"SHOW_PARTNER_VALIDATION_STATUS"}});(i||(i={})).PAYPAL="Paypal",Object.freeze({__proto__:null,PaymentEvent:{PAYMENT_BUTTON_CLICKED:"PAYMENT_BUTTON_CLICKED"},get PaymentType(){return i}})},688:(e,t,n)=>{"use strict";n.d(t,{y$:()=>s.y,tq:()=>a,xQ:()=>r,w0:()=>i.w,bf:()=>f,aj:()=>v,zq:()=>c,RB:()=>d,p4:()=>h,nb:()=>l,TS:()=>u,ZT:()=>o.Z});var i=n(621),s=n(856),o=n(190);class r extends s.y{constructor(){super((e=>(this._isComplete&&e.complete(),this._observers.push(e),()=>this._observers=this._observers.filter((t=>t!==e))))),this._observers=[],this._isComplete=!1}next(e){for(const t of this._observers)t.next(e)}error(e){for(const t of this._observers)t.error(e)}complete(){this._isComplete=!0;for(const e of this._observers)e.complete()}asObservable(){return new s.y((e=>{const t=this.subscribe(e);return()=>t.unsubscribe()}))}}class a extends r{constructor(e=-1){super(),this._buffer=[],this._error=null,this._bufferLength=e}subscribe(e,t,n){const i=(0,o.n)(e,t,n);let s=!0;return this._buffer.filter((e=>(e===this._error&&(s=!1),s))).forEach((e=>i.next(e))),this._error&&i.error(this._error),i.error=e=>{this._error=e,t(e)},super.subscribe(i)}next(e){this._error||this._addToBuffer(e),super.next(e)}error(e){this._error=e,this._addToBuffer(e),super.error(e)}_addToBuffer(e){-1!==this._bufferLength&&this._buffer.length===this._bufferLength?(this._buffer.shift(),this._buffer.push(e)):this._buffer.push(e)}}const c=(e,t)=>{let n;const i="object"==typeof t;return new Promise(((s,o)=>{n=e.subscribe(s,o,(()=>{i?s(t.defaultValue):o(new Error("CompletedBeforeEmit"))}))})).finally((()=>n.unsubscribe()))},l=(e,t)=>new Promise(((n,i)=>{let s;"object"==typeof t&&(s=t.defaultValue),e.subscribe((e=>s=e),(e=>i(e)),(()=>n(s)))})),d=(e,t)=>new s.y((n=>{const i=e=>n.next(e);return e.addEventListener(t,i),()=>e.removeEventListener(t,i)}));function h(e){return new s.y((t=>{e.then((e=>{t.next(e),t.complete()}),(e=>t.error(e)))}))}const u=(...e)=>new s.y((t=>{const n=new i.w;let s=0;for(const i of e)n.add(i.subscribe((e=>t.next(e)),(e=>t.error(e)),(()=>{s+=1,s>=e.length&&t.complete()})));return()=>n.unsubscribe()})),v=(...e)=>new s.y((t=>{if(!e.length)return t.complete(),o.Z;const n=new i.w,s=new Array(e.length),r=new Array(e.length),a=e=>!s.includes(void 0)&&t.next(e);for(let t=0;t<e.length;t++){const i=e[t].subscribe((e=>{r[t]=e,s[t]=!0,a(r)}));n.add(i)}return()=>n.unsubscribe()}));function f(e,t){return new p(e,t)}class p{constructor(e,t){this._target=e,this._handler=t}subscribe(e,t,n){const i=e.next?e.next.bind(e):e,s={next:(...e)=>{return t=this,n=void 0,o=function*(){try{yield i(...e)}catch(e){this._handler(e)}},new((s=void 0)||(s=Promise))((function(e,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(r,a)}c((o=o.apply(t,n||[])).next())}));var t,n,s,o},error:e.error?e.error.bind(e):t,complete:e.complete?e.complete.bind(e):n};return this._target.subscribe(s)}}},856:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var i=n(190),s=n(621);class o{constructor(e){this._setupFn=e}subscribe(e,t,n){const o=(0,i.n)(e,t,n);let r,a=!0;const c={next:e=>{a&&o.next(e)},complete:()=>{a&&(r&&r(),o.complete(),a=!1)},error:e=>{a&&(o.error(e),a=!1)}};r=this._setupFn(c),a||r&&r();const l=new s.w;return l.add({unsubscribe:()=>{r&&r(),a=!1}}),l}}},190:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i,n:()=>s});const i=()=>{},s=(e=i,t=i,n=i)=>"function"!=typeof e?e:{next:e,error:t,complete:n}},915:(e,t,n)=>{"use strict";n.d(t,{hX:()=>r,Ps:()=>a,UI:()=>c,zG:()=>o,bw:()=>l});var i=n(856);class s{constructor(e){this.value=e,this.complete=!1,this.skip=!1}}const o=e=>(...t)=>new i.y((n=>{const i=e.subscribe((e=>{return i=void 0,o=void 0,a=function*(){try{let i=new s(e);for(const e of t){const t=e(i);if(i=t.then?yield t:t,!0===i.skip||!0===i.complete)break}if(i.skip)return;n.next(i.value),!0===i.complete&&n.complete()}catch(e){n.error(e)}},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function s(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,s)}c((a=a.apply(i,o||[])).next())}));var i,o,r,a}),(e=>n.error(e)),(()=>n.complete()));return()=>i.unsubscribe()})),r=e=>t=>(!1===e(t.value)&&(t.skip=!0),t),a=e=>t=>(e?!0===e(t.value)?t.complete=!0:t.skip=!0:t.complete=!0,t),c=e=>t=>{const n=e(t.value);return new s(n)},l=e=>t=>(e(t.value),t)},621:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});class i{constructor(){this._subscribers=[]}add(e){this._subscribers.push(e)}unsubscribe(){this._subscribers.forEach((e=>e.unsubscribe()))}}},438:e=>{self,e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ERROR_LIMIT:()=>i,reportError:()=>r});class n extends Error{constructor(e,t){super(e),this.name=(null==t||t.name,this.name),this.code=null==t?void 0:t.code,this.additionalInformation=null==t?void 0:t.additionalInformation,this.handled=null!==(null==t?void 0:t.handled)&&!1,this.severity=(null==t?void 0:t.severity)||WSDKErrorSeverity.ERROR}}const i=10;let s=0,o=!1;const r=e=>{return void 0,void 0,n=function*(){var t,n;if(e.handled)return;if(!e.bypassErrorLimit&&s>=i){if(o)return;e.code="ERROR_LIMIT_EXCEEDED",o=!0}s++;const r=(1e7*Math.random()).toFixed(0).toString(),a=new URLSearchParams;a.append("use_sandbox",(null===(t=e.useSandbox)||void 0===t?void 0:t.toString())||"false"),a.append("error_id",r),a.append("partner_origin",window.location.origin),a.append("rokt_tag_id",e.tagId),a.append("severity",e.severity||"WARNING"),e.code&&a.append("code",e.code),e.integration&&a.append("integration",e.integration),e.stack&&(e.stack.length>400&&(e.stack=e.stack.substring(0,400)),a.append("stack",e.stack));const c=e.reporter?`frame-${e.reporter}`:"frame";a.append("reporter",c),e.additionalInformation=e.additionalInformation||{},e.additionalInformation.name=e.additionalInformation.name||e.name,e.additionalInformation.message=e.additionalInformation.message||e.message,a.append("additional_information",JSON.stringify(e.additionalInformation));const l=document.createElement("iframe");l.src=`https://apps.rokt.com/wsdk/reporter/index.html?${a.toString()}`,l.style.display="none";const d=new Promise((e=>{const t=n=>{var i,s,o;"Rokt.Reporter.Close"!==(null===(i=n.data)||void 0===i?void 0:i.action)&&(null===(o=null===(s=n.data)||void 0===s?void 0:s.payload)||void 0===o?void 0:o.errorId)!==r||(e(),window.removeEventListener("message",t))};window.addEventListener("message",t)}));(window.document.body||window.document.head).appendChild(l),yield d,null===(n=l.parentElement)||void 0===n||n.removeChild(l)},new((t=void 0)||(t=Promise))((function(e,i){function s(e){try{r(n.next(e))}catch(e){i(e)}}function o(e){try{r(n.throw(e))}catch(e){i(e)}}function r(n){var i;n.done?e(n.value):(i=n.value,i instanceof t?i:new t((function(e){e(i)}))).then(s,o)}r((n=n.apply(undefined,[])).next())}));var t,n};return t})()},724:(e,t,n)=>{"use strict";n.d(t,{bg:()=>a,KV:()=>p,SM:()=>s,tw:()=>o,kg:()=>u,Qp:()=>f,Cs:()=>h,D9:()=>v,Xy:()=>l,cZ:()=>_,aK:()=>m,c8:()=>i,XZ:()=>r});var i={};n.r(i),n.d(i,{bg:()=>a,KV:()=>p,SM:()=>s,tw:()=>o,kg:()=>u,Qp:()=>f,WN:()=>c,Cs:()=>h,D9:()=>v,Xy:()=>l,cZ:()=>_,aK:()=>m,XZ:()=>r});const s={LAUNCHER_INIT:"LAUNCHER_INIT",LAUNCHER_CONTROLLER_CONNECTION:"LAUNCHER_CONTROLLER_CONNECTION",LAUNCHER_CONTROLLER_CONNECTION_SETUP:"LAUNCHER_CONTROLLER_CONNECTION_SETUP",LAUNCHER_CONTROLLER_HANDLER_SETUP:"LAUNCHER_CONTROLLER_HANDLER_SETUP",LAUNCHER_CONTROLLER_CONNECTION_TIMEOUT:"LAUNCHER_CONTROLLER_CONNECTION_TIMEOUT",LAUNCHER_REJECT_LATE_CONTROLLER_CONNECTION:"LAUNCHER_REJECT_LATE_CONTROLLER_CONNECTION",LAUNCHER_DUPLICATE_SELECT_PLACEMENTS:"LAUNCHER_DUPLICATE_SELECT_PLACEMENTS",LAUNCHER_FAILED_TO_PLACE_PLUGIN:"LAUNCHER_FAILED_TO_PLACE_PLUGIN",LAUNCHER_PLACEMENT_EVENT_PARTNER_CALLBACK_ERROR:"LAUNCHER_PLACEMENT_EVENT_PARTNER_CALLBACK_ERROR"},o={AttributesCapture:"ATTRIBUTES_CAPTURE",AttributesCaptureFailure:"ATTRIBUTES_CAPTURE_FAILURE",PageIdUpdated:"PAGE_ID_UPDATED",PageInstanceGuidUpdated:"PAGE_INSTANCE_GUID_UPDATED",PageVariantNameUpdated:"PAGE_VARIANT_NAME_UPDATED",SessionIdUpdated:"SESSION_ID_UPDATED",SessionInformationUpdated:"SESSION_INFORMATION_UPDATED",RoktWSDKIntegration:"ROKT_WSDK_INTEGRATION"},r=e=>t=>{t.isResponse||(t.headers=Object.assign(Object.assign({},t.headers),{"launcher-version":e}))},a={UserAgent:"userAgent",ClientType:"clientType",PassbackConversionId:"passbackconversiontrackingid"},c={Default:"default",Preload:"preload"},l={OFFER_ENGAGEMENT:"OFFER_ENGAGEMENT",POSITIVE_ENGAGEMENT:"POSITIVE_ENGAGEMENT",OFFER_POSITIVE_ENGAGEMENT:"OFFER_POSITIVE_ENGAGEMENT",PLACEMENT_CLOSED:"PLACEMENT_CLOSED",PLACEMENT_COMPLETED:"PLACEMENT_COMPLETED",PLACEMENT_INTERACTIVE:"PLACEMENT_INTERACTIVE",PLACEMENT_READY:"PLACEMENT_READY",PLACEMENT_RESIZE:"PLACEMENT_RESIZE",PLACEMENT_FAILURE:"PLACEMENT_FAILURE",UPDATE_CART_ITEM_MESSAGE:"UPDATE_CART_ITEM_MESSAGE",DISPLAY_SETTINGS_SET:"DISPLAY_SETTINGS_SET",PAYMENT_BUTTON_CLICKED:"PAYMENT_BUTTON_CLICKED"};var d;!function(e){e.PAYPAL="Paypal"}(d||(d={}));const h={PUT_DISPLAY_SETTINGS:"[L] PUT_DISPLAY_SETTINGS",GET_FULFILLMENT_ATTRIBUTES:"[L] GET_FULFILLMENT_ATTRIBUTES",CLOSE_PLACEMENT:"[L] CLOSE_PLACEMENT",FAILED_TO_LOAD_PLUGIN:"[L] FAILED_TO_LOAD_PLUGIN",PLUGIN_TO_PARTNER:"[L] PLUGIN_TO_PARTNER",CONTROLLER_TO_PARTNER:"[L] CONTROLLER_TO_PARTNER",CREATE_PLUGIN:"[L] CREATE_PLUGIN",SET_FIRST_PARTY_RECOGNISER:"[L] SET_FIRST_PARTY_RECOGNISER",PLUGIN_RESIZED:"[L] PLUGIN_RESIZED",ATTRIBUTES_CAPTURE_RESULT:"[L] ATTRIBUTES_CAPTURE_RESULT",SEND_LAUNCHER_EVENT:"[L] SEND_LAUNCHER_EVENT",CONTROLLER_SETUP_COMPLETE:"[L] CONTROLLER_SETUP_COMPLETE"},u={FRAME_TYPE:"rokt-frame-type"},v={PAGE_START:"PAGE_START",ROKT_START:"ROKT_START",INTEGRATION_START:"INTEGRATION_START",LAUNCHER_START:"LAUNCHER_START",CONTROLLER_FRAME_CREATED:"CONTROLLER_FRAME_CREATED",PLUGIN_FRAME_CREATED:"PLUGIN_FRAME_CREATED",PLUGIN_RUNTIME_FRAME_CREATED:"PLUGIN_RUNTIME_FRAME_CREATED",SELECTION_START:"SELECTION_START",SELECTION_END:"SELECTION_END"},f={PluginRuntime:"plugin-runtime"},p={Standard:"Standard",Fulfillment:"Fulfillment"},_="rtid",m="RoktTransactionId"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";n.r(i),n.d(i,{__getActiveLauncher:()=>St,createLauncher:()=>It});const e={[n(720).IP.Extension.PartnerValidation]:()=>Promise.resolve().then(n.bind(n,48)).then((e=>e.PartnerValidation))},t="ERROR",s="WARNING";class o extends Error{constructor(e,n){var i,s;super(e),this.name=null!==(i=null==n?void 0:n.name)&&void 0!==i?i:this.name,this.code=null==n?void 0:n.code,this.additionalInformation=null==n?void 0:n.additionalInformation,this.handled=null!==(s=null==n?void 0:n.handled)&&void 0!==s&&s,this.severity=(null==n?void 0:n.severity)||t}}var r=n(438);const a="NO_ACCOUNT_ID",c="NO_OPTIONS";var l=n(688),d=n(915);const h=e=>e.send();var u=n(724);class v{constructor(){this.fulfilled=!1,this.rejected=!1,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})).then((e=>(this.fulfilled=!0,e)),(e=>{throw this.rejected=!0,e}))}isFulfilled(){return this.fulfilled}isPending(){return!this.isFulfilled()&&!this.isRejected()}isRejected(){return this.rejected}static resolve(e){const t=new v;return t.resolve(e),t}}new RegExp("^\\d{4}-\\d{2}-\\d{2}((T\\d{2}:\\d{2}(:\\d{2})?)(\\.\\d{1,6})?(Z|(\\+|-)\\d{2}:\\d{2})?)?$");const f=(e=0)=>new Promise((t=>setTimeout(t,e)));function p(e,t=3,n=100,i=(()=>!0)){return s=this,o=void 0,a=function*(){try{return yield e()}catch(e){if(t<=1||!i(e))throw e}return yield f(1*n),yield p(e,t-1,n)},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function i(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var s;t.done?e(t.value):(s=t.value,s instanceof r?s:new r((function(e){e(s)}))).then(n,i)}c((a=a.apply(s,o||[])).next())}));var s,o,r,a}function _(e){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}(e)?parseInt(e,10):0}function m(){const e=document.body.querySelectorAll("*");return Array.from(e).filter((e=>e&&e.nodeType===Node.ELEMENT_NODE)).reduce(((e,t)=>{const n=_(document.defaultView.getComputedStyle(t).getPropertyValue("z-index")),i=_(t.style&&t.style.zIndex);return Math.max(e,n,i)}),0)}const E=(e,t={})=>{for(const[n,i]of Object.entries(t))e.style[n]=i};class g{constructor(e){this.window=e}getCookie(e){try{const t=this.window.document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}catch(e){}}setCookie(e,t=!1){try{t&&(e.domain=this.getBaseDomain()),this.window.document.cookie=this.serialize(e)}catch(e){}}getBaseDomain(){const e=this.window.location.hostname,t=e.split("."),n=t.pop(),i=t.pop();return i&&n?`.${i}.${n}`:e}serialize(e){const{name:t,path:n="/",sameSite:i,secure:s,value:o,domain:r}=e;let{expires:a}=e;if(!a){const e=new Date;e.setTime(e.getTime()+31536e6),a=e}let c=`${t}=${o};expires=${a.toUTCString()};path=${n}`;return r&&(c+=`;domain=${r}`),s&&(c+=";secure"),i&&(c+=`;samesite=${i}`),c}}const T=()=>{if("undefined"==typeof window)throw new Error("NO_WINDOW");return window};class w{constructor(e,t="local"){this.window=e,this._store="session"===t?"sessionStorage":"localStorage"}getItem(e){try{const t=this.window[this._store].getItem(e);if(null===t)return;return t}catch(e){return}}setItem(e,t){try{this.window[this._store].setItem(e,t)}catch(e){}}}class S extends w{constructor(e){super(e,"local")}}const y="RoktRecogniser";class I{constructor(e,t,n){this.cookieService=e,this.localStorageService=t,this.sameSite=n}setRecogniser(e){e.cookie&&this.cookieService.setCookie({name:y,sameSite:this.sameSite,secure:!0,value:e.cookie}),e.localStorage&&this.localStorageService.setItem(y,e.localStorage)}getRecogniser(){return{cookie:this.cookieService.getCookie(y),localStorage:this.localStorageService.getItem(y)}}}class R extends I{constructor(e,t){super(e,t,"lax")}}class b{constructor(e,t){this._tagId=e,this._cookieService=t}setSessionInformationCookie(e){const t=this._unpackSessionInformation(e);this._validateSessionCookie(t)&&this._cookieService.setCookie({name:`RoktSessionId-${this._tagId}`,sameSite:"strict",secure:!0,value:e,expires:new Date(t.expirationTimestamp)},!0)}getSessionInformationCookie(){const e=this._cookieService.getCookie(`RoktSessionId-${this._tagId}`);return e&&this._validateSessionCookie(this._unpackSessionInformation(e))?e:""}_unpackSessionInformation(e){const[t,n,i]=e.split("|");return{sessionId:t,isTestSession:"true"===n,expirationTimestamp:Number(i)}}_validateSessionCookie(e){return""!==e.sessionId&&!!e.expirationTimestamp}}function A(){return window.crypto||window.msCrypto}function N(e){return Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")}function P(e){return new Promise(((t,n)=>{const i=function(e){if(window.TextEncoder)return(new TextEncoder).encode(e);const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}(e),s=A().subtle.digest("SHA-256",i);s.then?s.then((e=>{t(N(e))}),n):(s.oncomplete=e=>{const n=e.target.result;t(N(n))},s.onerror=e=>{n(e)})}))}var O=function(e,t,n){if(n||2===arguments.length)for(var i,s=0,o=t.length;s<o;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))},C=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},L=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},x=function(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"},U=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},D=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},M=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,k=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],G=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function F(e){var t=function(e){return""!==e&&k.reduce((function(t,n){var i=n[0],s=n[1];if(t)return t;var o=s.exec(e);return!!o&&[i,o]}),!1)}(e);if(!t)return null;var n=t[0],i=t[1];if("searchbot"===n)return new U;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<3&&(s=O(O([],s,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-s.length),!0)):s=[];var o=s.join("."),r=function(e){for(var t=0,n=G.length;t<n;t++){var i=G[t],s=i[0];if(i[1].exec(e))return s}return null}(e),a=M.exec(e);return a&&a[1]?new x(n,o,r,a[1]):new C(n,o,r)}function W(e){return function(e){return e?F(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new D:"undefined"!=typeof navigator?F(navigator.userAgent):"undefined"!=typeof process&&process.version?new L(process.version.slice(1)):null}(e)}function j(e=5){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length;for(let s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*i));return t}class V extends Error{constructor(e,t){var n,i;super(e),this.name=null!==(n=null==t?void 0:t.name)&&void 0!==n?n:this.name,this.code=null==t?void 0:t.code,this.additionalInformation=null==t?void 0:t.additionalInformation,this.handled=null!==(i=null==t?void 0:t.handled)&&void 0!==i&&i}}class H{constructor(e){this.ID=e.ID,this.eventType=e.eventType,this.body=e.body||{},this.headers=e.headers||{},this.hasError=e.hasError||!1,this.isResponse=!!e.isResponse}}var z=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class K{constructor(e){var t;this.options=e,this.id=this.options.id||j(10),this.alias=this.options.alias||"No Alias",this.connection=this.options.connection,this.timeoutDuration=null!==(t=this.options.timeoutDuration)&&void 0!==t?t:1e4,this.interceptors=[]}addInterceptor(e){this.interceptors.push(e)}send(e,{body:t,headers:n={}}={}){return z(this,void 0,void 0,(function*(){const i=this.runInterceptors(this.createRequest(e,t,n)),s=new Promise(((t,n)=>z(this,void 0,void 0,(function*(){let s=!1;const o=setTimeout((()=>{s||(n(new V(`Request timed out for ${e}`,{code:"REQUEST_TIMEOUT_ERROR"})),s=!0)}),this.timeoutDuration);(0,d.zG)(this.connection.onMessage)((0,d.Ps)((e=>e.ID===i.ID))).subscribe((i=>{if(s)return;if(clearTimeout(o),!i)return void n(new V(`Wrong request format for ${e}`,{code:"REQUEST_FORMAT_ERROR"}));const r=this.runInterceptors(i);!0===r.hasError?n(r.body):t(r)}))}))));return this.connection.send(i),s}))}runInterceptors(e){const t=(e=>{const t=new WeakMap,n=e=>{if(!e||"object"!=typeof e)return e;let i;const s=Array.isArray(e)?[]:{},o=Object.getPrototypeOf(s);t.set(e,s);for(const r in e)o[r]||(i=e[r],i&&"object"==typeof i?t.get(i)?s[r]=t.get(i):s[r]=n(i):s[r]=i);return s};return n(e)})(e);for(const e of this.interceptors)e(t);return t}createRequest(e,t,n){return new H({ID:j(10),eventType:e,body:t,headers:Object.assign({"sender-alias":this.alias,"sender-id":this.id},n)})}}class ${constructor(){this.middleware=[],this.handlers={}}getHandlers(){const e={};for(const[t,n]of Object.entries(this.handlers))e[t]=[...this.middleware,...n];return e}use(e){this.middleware.push(e)}on(e,...t){this.handlers[e]=t}}class B{constructor(e,t){this.connection=e,this.event=t,this.data={},this.isSent=!1,this.responseHeaders={}}getHeaders(){return this.event.headers}getEvent(){return this.event.eventType}getContext(e){return this.data[e]}setResponseHeader(e,t){this.responseHeaders[e]=t}setContext(e,t){this.data[e]=t}getBody(){return this.event.body}setBody(e){this.event.body=e}sendError(e){this.validate(e),e instanceof Error&&(e=this.convertErrorToObject(e));const t=new H({ID:this.event.ID,eventType:this.event.eventType,body:e,headers:this.responseHeaders,hasError:!0,isResponse:!0});this.connection.send(t),this.isSent=!0}send(e){this.validate(e);const t=new H({ID:this.event.ID,eventType:this.event.eventType,body:e,headers:this.responseHeaders,isResponse:!0});this.connection.send(t),this.isSent=!0}hasSent(){return this.isSent}validate(e){if(!0===this.isSent)throw{name:"HandlerContext.RESPONSE_ALREADY_SENT",message:"HandlerContext: Response already sent.",code:"RESPONSE_ALREADY_SENT",additionalInformation:{response:e}}}convertErrorToObject(e){return{message:e.message,name:e.name,stack:e.stack,code:e.code,handled:e.handled,additionalInformation:e.additionalInformation}}}var Y=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class X{constructor(e){this.options=e,this.onMessage=e=>t=>((e,...t)=>Y(void 0,void 0,void 0,(function*(){const n=e;let i=!1;const[s,o]=function(e){const t=[];return[e.filter((e=>!(e.length>1&&(t.push(e),1)))),t]}(t),r=(e,t)=>Y(void 0,void 0,void 0,(function*(){if(!o.length)throw t;for(const n of o)yield n(e,t)}));for(const e of s)try{yield e(n)}catch(e){i=!0,yield r(n,e);break}i||n.hasSent()||(yield r(n,new Error(`Context: Response never sent for ${n.getEvent()}`)))})))(new B(this.connection,t),...this.middleware,...e),this.connection=this.options.connection,this.subscription=new l.w0,this.handlers=[],this.middleware=[]}use(e){if(e instanceof $){const t=e.getHandlers();for(const[e,n]of Object.entries(t))this.on(e,...n)}else this.middleware.push(e)}on(e,...t){if(this.handlers.includes(e))throw new Error("HandlerExists");this.handlers.push(e);const n=(0,d.zG)(this.connection.onMessage)((0,d.hX)((t=>t.eventType===e)));this.subscription.add(n.subscribe(this.onMessage(t)))}close(){this.subscription.unsubscribe()}}var Z=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class q{constructor(e,t){this.transmitter=e,this.router=t}eject(){return{transmitter:this.transmitter,router:this.router}}addInterceptor(e){return Z(this,void 0,void 0,(function*(){this.transmitter.addInterceptor(e)}))}send(e,t={}){return Z(this,void 0,void 0,(function*(){return this.transmitter.send(e,t)}))}use(e){return Z(this,void 0,void 0,(function*(){this.router.use(e)}))}on(e,...t){return Z(this,void 0,void 0,(function*(){this.router.on(e,...t)}))}close(){return Z(this,void 0,void 0,(function*(){this.router.close()}))}}var Q=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class J{constructor(){this.hasConnected=!1,this.transmitter=new v,this.router=new v}setEngine(e){const{router:t,transmitter:n}=e.eject();this.router.resolve(t),this.transmitter.resolve(n),this.hasConnected=!0}setRouter(e){this.router.resolve(e)}setTransmitter(e){this.transmitter.resolve(e)}addInterceptor(e){return Q(this,void 0,void 0,(function*(){(yield this.transmitter.promise).addInterceptor(e)}))}send(e,t={}){return Q(this,void 0,void 0,(function*(){return(yield this.transmitter.promise).send(e,t)}))}use(e){return Q(this,void 0,void 0,(function*(){(yield this.router.promise).use(e)}))}on(e,...t){return Q(this,void 0,void 0,(function*(){(yield this.router.promise).on(e,...t)}))}close(){return Q(this,void 0,void 0,(function*(){(yield this.router.promise).close()}))}}const ee="ERROR_SENT",te=(e,t)=>{!e.hasSent()&&t&&(e.sendError(t),((e,t)=>{e.setContext(ee,!0)})(e))},ne="[C] ERROR",ie=e=>{if(!e.isResponse&&e.body instanceof Error){const t=e.body;e.body={name:t.name,message:t.message,stack:t.stack,code:t.code,additionalInformation:t.additionalInformation,handled:t.handled,level:t.level}}},se="rokt-controller-frame";class oe{constructor(e,t){this.type=e,this.payload=t}}const re="LINK_SENDING_DATA",ae="LINK_CLIENT_READY_FOR_PORT",ce="LINK_HOST_PORT_TRANSFER",le="LINK_LISTENING";class de{constructor(e){this.port=e,this.onEvent=(0,l.RB)(this.port,"message");const t=(0,d.zG)(this.onEvent)((0,d.Ps)((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.type)===le})));this.onReady=(0,l.nb)(t).then((()=>{})),this.onMessage=(0,d.zG)(this.onEvent)((0,d.hX)((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.type)===re})),(0,d.UI)((e=>e.data.payload))),this.port.start()}send(e){this.dispatch(e)}dispatch(e){return t=this,n=void 0,s=function*(){yield this.onReady;const t=new oe(re,e);this.port.postMessage(t)},new((i=void 0)||(i=Promise))((function(e,o){function r(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}c((s=s.apply(t,n||[])).next())}));var t,n,i,s}}var he=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))},ue=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class ve{constructor(e){this.options=e,this.onConnectionSubject=new l.xQ,this.connections={},this.handshakeFilter=e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.type)===ae&&e.data.payload.ID===(this.options.ID||80)},this.handshake=e=>ue(this,void 0,void 0,(function*(){const t=j(20),n=new this.options.channelConstructor,{port1:i,port2:s}=n,o=new de(i);e.source&&(e.source.postMessage(new oe(ce),this.options.targetOrigin,[s]),yield o.onReady,this.connections[t]=o,this.onConnectionSubject.next(o),i.postMessage(new oe(le)))})),this.onConnection=this.onConnectionSubject.asObservable();const t=(0,l.RB)(this.options.selfEventSource,"message");this.onPostMessage=(0,d.zG)(t)((0,d.hX)(this.handshakeFilter)).subscribe(this.handshake)}destroy(){this.onPostMessage.unsubscribe()}connect(e){return ue(this,void 0,void 0,(function*(){const t=yield(({target:e,targetID:t=80,targetOrigin:n="*",selfEventSource:i,retryTimeout:s=1e3})=>he(void 0,void 0,void 0,(function*(){const o=(0,l.RB)(i,"message"),r=(0,d.zG)(o)((0,d.Ps)((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.type)===ce}))),a=(0,l.nb)(r);let c;setTimeout((()=>he(void 0,void 0,void 0,(function*(){for(;void 0===c;)e.postMessage(new oe(ae,{ID:t}),n),yield f(s)}))),0);const h=yield a;c=h.ports[0];const u=new de(c);return c.postMessage(new oe(le)),u})))({target:e.target,targetOrigin:this.options.targetOrigin||"*",selfEventSource:this.options.selfEventSource});return this.onConnectionSubject.next(t),t}))}}function fe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{return(("y"===e?8:0)^(t=new Uint8Array(1),A().getRandomValues(t))[0]&15>>("y"===e?2:0)).toString(16);var t}))}function pe(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))}Object.create,Object.create;const _e="__rokt-launcher__";let me;const Ee="NoElementToPlacePlugin";function ge(e){const t=/url|\\|&/i;return Object.entries(e).reduce(((e,[n,i])=>(t.test(i)||(e[n]=i),e)),{})}class Te{constructor(e,t,n){this.services=e,this.pluginDetails=t,this.onResizeSubject$=new l.xQ,this.usingAutoResize=!1,this.attributeSet=!1,this.url=n?`${n}/wsdk/plugin-runtime/index.html`:this.services.urls.PLUGIN_RUNTIME_URL,this.element=((e={},...t)=>{const n=document.createElement(e.tag||"div");e.id&&(n.id=e.id),e.className&&(n.classList.value=e.className),e.cssText&&(n.style.cssText=e.cssText),e.styles&&E(n,e.styles),e.innerText&&(n.innerText=e.innerText),e.events&&((e,t={})=>{for(const[n,i]of Object.entries(t))e[n]=i})(n,e.events),e.attributes&&((e,t={})=>{for(const[n,i]of Object.entries(t))e.setAttribute(n,i)})(n,e.attributes),e.title&&(n.title=e.title);for(const e of t)"string"==typeof e?n.appendChild(document.createTextNode(e)):n.appendChild(e);return n})({tag:"iframe",styles:{border:0,width:"1px",minWidth:"100%",boxSizing:"border-box",display:"block"},id:`rokt-placement-${this.pluginDetails.pluginInstanceId}`,title:"Rokt placement",attributes:{[u.kg.FRAME_TYPE]:u.Qp.PluginRuntime}}),this.onLoaded=new Promise((e=>this.element.onload=()=>e()))}getElement(){return this.element}setSandbox(e=[]){if(!0===this.attributeSet)throw new Error("Can only set attributes once");for(const t of["allow-scripts","allow-same-origin",...e])this.element.sandbox.add(t);this.attributeSet=!0}resetStyles(){this.element.removeAttribute("style")}removeStyles(e=[]){for(const t of e)this.element.style.removeProperty(t)}setStyles(e={}){E(this.element,e)}setSize(e,t){!1!==this.usingAutoResize&&(this.setStyles({height:`${e}px`,width:`${t}px`}),this.onResizeSubject$.next({height:e.toString(),width:t.toString()}))}setFullscreen(){const e=this.services.window.document.body;this.originalOverflowValue=e.style.overflow,e.style.overflow="hidden"}useAutoResizer(){this.usingAutoResize=!0}insert(e,t="child",n="append"){let i;switch(this.element.name=this.pluginDetails.configuration,this.element.src=this.url,`${t}-${n}`){case"sibling-prepend":i="beforebegin";break;case"child-prepend":i="afterbegin";break;case"sibling-append":i="afterend";break;default:i="beforeend"}e.insertAdjacentElement(i,this.element);const s=e=>{e.persisted&&(this.close(),window.removeEventListener("pageshow",s))};window.addEventListener("pageshow",s)}close(){var e;null===(e=this.element.parentNode)||void 0===e||e.removeChild(this.element),this.onResizeSubject$.complete(),"string"==typeof this.originalOverflowValue&&(this.services.window.document.body.style.overflow=this.originalOverflowValue)}onLoad(){return this.onLoaded}onClose(){return pe(this,void 0,void 0,(function*(){var e;yield this.onLoaded,yield(e=this.element,new Promise((t=>{const n=new MutationObserver((i=>{i.forEach((i=>{const s=Array.from(i.removedNodes),o=s.indexOf(e)>-1,r=s.some((t=>t.contains&&t.contains(e)));(o||r)&&(n.disconnect(),t())}))}));n.observe(document.body,{subtree:!0,childList:!0})})))}))}onResize(){return this.onResizeSubject$.asObservable()}}class we{constructor(e,t,n,i=new l.xQ,s,o){this._details=e,this._services=t,this._catchWrapSubscriber=n,this._internalEvents$=i,this._serviceUrlOverride=o,this.handleClose=()=>{this.sendToPartner({event:u.Xy.PLACEMENT_CLOSED,body:{}}),this._internalEvents$.complete()},this._frame=s||this.createFrame(),this._displayResolver=new v,this.setupHandlers(),this._frame.onResize().subscribe((e=>{this.sendToPartner({event:u.Xy.PLACEMENT_RESIZE,body:e})}))}getElement(){return this._frame.getElement()}getAlias(){var e;return null!==(e=this._details.alias)&&void 0!==e?e:""}on(e){const{placementsStream:t}=this._services,n=(0,d.zG)(t.on(this._details.pluginInstanceId,u.Cs.PLUGIN_TO_PARTNER))((0,d.UI)((e=>e.getBody())));return this._catchWrapSubscriber((0,d.zG)((0,l.TS)(n,this._internalEvents$))((0,d.hX)((t=>"*"===e||t.event===e)),(0,d.UI)((e=>({body:e.body,event:e.event,placement:this})))),(e=>{throw e.code=u.SM.LAUNCHER_PLACEMENT_EVENT_PARTNER_CALLBACK_ERROR,this._services.logger.raiseWarning(e),e}))}send(e,t){return pe(this,void 0,void 0,(function*(){const{placementsStream:n}=this._services;yield n.send(this._details.pluginInstanceId,e,t)}))}place(e){return pe(this,void 0,void 0,(function*(){const{metricsService:t,controllerService:n,logger:i,partnerContentTemplateService:s}=this._services;try{this._frame.setStyles({display:"none"});const{targetElementSelector:i="body"}=this._details;yield i&&"body"!==i?s.isTemplateReady():Promise.resolve();const o=yield p((()=>Promise.resolve(e||((e="")=>{const t=(n=e)?n.replace(/([\#\.])([0-9])/gi,"$1\\3$2 "):n;var n;if(!t)return window.document.body;const i=window.document.querySelector(t);if(!i)throw new Error(Ee);return i})(this._details.targetElementSelector))),50,100);t.triggerPluginFrameCreated(this._details.alias||"",this._details.pluginInstanceId),this._frame.insert(o,this._details.targetElementRelation||void 0,this._details.targetElementPosition||void 0),yield this._frame.onLoad(),this._frame.onClose().then(this.handleClose),this.sendToPartner({event:u.Xy.PLACEMENT_READY,body:{}}),yield n.framePlaced(this._details.pluginInstanceId)}catch(e){throw e.code=u.SM.LAUNCHER_FAILED_TO_PLACE_PLUGIN,e.additionalInformation={placementId:this.getAlias()},i.raiseWarning(e),this._displayResolver.resolve(e),e}}))}remove(){return pe(this,void 0,void 0,(function*(){return this._frame.close()}))}onClose(){return pe(this,void 0,void 0,(function*(){return this._frame.onClose()}))}onDisplay(){return pe(this,void 0,void 0,(function*(){const e=yield this._displayResolver.promise;if(e)throw e}))}setupHandlers(){const{placementsStream:e}=this._services;e.on(this._details.pluginInstanceId,u.Cs.PUT_DISPLAY_SETTINGS).subscribe((e=>pe(this,void 0,void 0,(function*(){yield(({pluginRuntimeFrame:e,internalEvents$:t})=>n=>pe(void 0,void 0,void 0,(function*(){const{sandbox:i,css:s,outerCss:o,applyHighestZIndex:r,autoresize:a,preset:c,title:l}=n.getBody();a&&e.useAutoResizer(),"DisplayPreset.FULLSCREEN"===c&&e.setFullscreen(),i&&e.setSandbox(i),s&&e.setStyles(ge(s)),o&&e.setStyles(ge(o)),l&&(e.getElement().title=l),r&&e.setStyles({zIndex:m()+1}),e.removeStyles(["display"]),t.next({event:u.Xy.DISPLAY_SETTINGS_SET,body:void 0}),n.send()})))({pluginRuntimeFrame:this._frame,internalEvents$:this._internalEvents$})(e),this._displayResolver.resolve()})))),e.on(this._details.pluginInstanceId,u.Cs.PLUGIN_RESIZED).subscribe((({pluginRuntimeFrame:e})=>t=>pe(void 0,void 0,void 0,(function*(){const{height:n,width:i}=t.getBody();e.setSize(n,i),t.send()})))({pluginRuntimeFrame:this._frame})),e.on(this._details.pluginInstanceId,u.Cs.CLOSE_PLACEMENT).subscribe((e=>{this._frame.close(),e.send()})),e.on(this._details.pluginInstanceId,u.Cs.FAILED_TO_LOAD_PLUGIN).subscribe((e=>{this._displayResolver.resolve(new Error("Placement failed to load")),e.send()}))}createFrame(){return new Te(this._services,this._details,this._serviceUrlOverride)}sendToPartner(e){this._internalEvents$.next(e)}}class Se{constructor(e){this.controller=e,this._bus=new l.xQ,this.middleware=()=>e=>this._bus.next(e)}on(e,t){return(0,d.zG)(this._bus)((0,d.hX)((n=>(e=>e.getHeaders()["plugin-instance-id"])(n)===e&&n.getEvent()===t)))}send(e,t,n){return pe(this,void 0,void 0,(function*(){yield this.controller.send("[P] PARTNER_TO_PLUGIN",{body:{event:t,body:n},headers:{"placement-id":e}})}))}}class ye{constructor(e){this._placements=e}placeAll(){return pe(this,void 0,void 0,(function*(){const e=this._mapAll((e=>e.place()));yield Promise.all(e)}))}removeAll(){return pe(this,void 0,void 0,(function*(){const e=this._mapAll((e=>e.remove()));yield Promise.all(e)}))}getAll(){return this._placements}on(e){const t=this._mapAll((t=>t.on(e)));return(0,l.TS)(...t)}onDisplay(){return pe(this,void 0,void 0,(function*(){const e=this._mapAll((e=>e.onDisplay()));yield Promise.all(e)}))}send(e,t){return pe(this,void 0,void 0,(function*(){const n=this._mapAll((n=>n.send(e,t)));yield Promise.all(n)}))}_mapAll(e){const t=[];for(const n of this._placements)t.push(e(n));return t}}class Ie{constructor(e,t,n){this._controllerService=n,this.context=e,this.placements=new ye(t)}setAttributes(e){return pe(this,void 0,void 0,(function*(){yield this._controllerService.setAttributes(e)}))}}class Re{constructor(){this.fulfillmentAttributes={}}setFulfillmentAttributes(e){this.fulfillmentAttributes=this.filterAttributes(e)}getFulfillmentAttributes(){return this.fulfillmentAttributes}getHashedFulfillmentAttributes(){return pe(this,void 0,void 0,(function*(){const e=Object.keys(this.fulfillmentAttributes);return 0===e.length?Promise.resolve({}):new Promise(((t,n)=>{const i=e.map((e=>P(`${this.fulfillmentAttributes[e].value}`.trim().toLowerCase())));Promise.all(i).then((n=>{const i=n.reduce(((t,n,i)=>{const s=`widget-${e[i]}sha256hex`;return t[s]={type:u.KV.Fulfillment,name:s,value:n},t}),{});t(i)}),n)}))}))}filterAttributes(e){return e?((e,t)=>{const n={};for(const t of Object.keys(e)){const s=e[t];(i=s).type===u.KV.Fulfillment&&void 0!==i.value&&null!==i.value&&""!==i.value&&(n[t]=s)}var i;return n})(e):{}}}const be=e=>!e||"object"!=typeof e||e.constructor!==Object;class Ae{constructor(e,t,n,i,s,o){this.window=e,this.controllerConnection=t,this.fulfillmentAttributeService=n,this.sessionService=i,this.eventsService=s,this.referralService=o}selectPlacements(e,t,n){return pe(this,void 0,void 0,(function*(){const i={attributes:yield this.processAttributes(e),pageInstanceId:this.sessionService.pageInstanceId,pageIdentifier:t,omitUrl:n||!1,url:this.window.location.href};try{const e=yield this.controllerConnection.send("[C] SELECT_PLACEMENTS",{body:i});return this.eventsService.emit(u.tw.AttributesCapture),e.body}catch(e){throw this.eventsService.emit(u.tw.AttributesCaptureFailure),e}}))}placementPlaced(e){return pe(this,void 0,void 0,(function*(){yield this.controllerConnection.send("[C] PLACEMENT_PLACED",{body:{id:e}})}))}framePlaced(e){return pe(this,void 0,void 0,(function*(){yield this.controllerConnection.send("[C] FRAME_LOAD_END",{body:{id:e}})}))}setAttributes(e){return pe(this,void 0,void 0,(function*(){try{yield this.controllerConnection.send("[C] SET_ATTRIBUTES",{body:{pageInstanceId:this.sessionService.pageInstanceId,attributes:e}})}catch(e){throw this.eventsService.emit(u.tw.AttributesCaptureFailure),e}}))}processAttributes(e){return pe(this,void 0,void 0,(function*(){const t=Object.assign({},e),n={},i={};for(const[e,s]of Object.entries(t))(s||!1===s||0===s)&&(be(s)?i[e]={name:e,type:u.KV.Standard,value:s}:s.type===u.KV.Standard?i[s.name]=s:s.type===u.KV.Fulfillment&&(n[s.name]=s));this.fulfillmentAttributeService.setFulfillmentAttributes(n);const s=yield this.fulfillmentAttributeService.getHashedFulfillmentAttributes(),o=Object.assign(Object.assign({},i),s);if(o[u.bg.UserAgent]||(o[u.bg.UserAgent]={name:u.bg.UserAgent,type:u.KV.Standard,value:this.window.navigator.userAgent}),!o[u.bg.ClientType]){const e=function(e){const t=W(void 0),n=t?t.os:null;if(null!==n)switch(n){case"Amazon OS":case"Android OS":case"BlackBerry OS":case"iOS":case"Windows Mobile":return"MobileWeb";default:return"DesktopWeb"}}();e&&(o[u.bg.ClientType]={name:u.bg.ClientType,type:u.KV.Standard,value:e})}if(!o[u.bg.PassbackConversionId]){const e=this.referralService.getReferralId();e&&(o[u.bg.PassbackConversionId]={name:u.bg.PassbackConversionId,type:u.KV.Standard,value:e})}return o}))}}class Ne extends J{constructor(e,n){super(),this._errorReporter=e,this.constants=n,this._CONNECTION_TIMEOUT=13e3,this._connectionPromise=new v,this._setupCompletePromise=new v,this._link=(({targetOrigin:e,ID:t=80,window:n=T()})=>new ve({targetOrigin:e,ID:t,selfEventSource:n,channelConstructor:n.MessageChannel}))({targetOrigin:"*"}),this._link.onConnection.subscribe((e=>{if(this._connectionError){const e=new o("",{code:u.SM.LAUNCHER_REJECT_LATE_CONTROLLER_CONNECTION,severity:t});this._errorReporter(e)}else{try{const t=new q(new K(n={connection:e,alias:"Launcher",timeoutDuration:15e3}),new X(n));t.use((e=>t=>{t.setResponseHeader("origin",e.location.origin),t.setResponseHeader("host",e.location.host),t.setResponseHeader("href",e.location.href),t.setResponseHeader("pathname",e.location.pathname)})(window)),t.use(te),t.use((i=this,(e,t)=>{t&&e.hasSent()&&!(e=>e.getContext(ee))(e)&&i.send(ne,{body:t})})),t.addInterceptor((e=>t=>{t.isResponse||(t.headers=Object.assign(Object.assign({},t.headers),{host:e.location.host,origin:e.location.origin,href:e.location.href,pathname:e.location.pathname}))})(window)),t.addInterceptor((0,u.XZ)(this.constants.VERSION)),t.addInterceptor(ie),this.setEngine(t),t.on(u.Cs.CONTROLLER_SETUP_COMPLETE,h,(()=>this._setupCompletePromise.resolve())),this._connectionPromise.resolve()}catch(e){throw e.code=u.SM.LAUNCHER_CONTROLLER_HANDLER_SETUP,e.severity=t,this._errorReporter(e),e}var n}var i}))}onConnection(){return pe(this,void 0,void 0,(function*(){if(yield this._connectionPromise.promise,this._connectionError)throw this._connectionError}))}onSetupComplete(){return pe(this,void 0,void 0,(function*(){yield this._setupCompletePromise.promise}))}connect(e){return pe(this,void 0,void 0,(function*(){const n=f(this._CONNECTION_TIMEOUT).then((()=>{throw new o("",{code:u.SM.LAUNCHER_CONTROLLER_CONNECTION_TIMEOUT,severity:t})})),i=this._link.connect({target:e}).catch((()=>{throw new o("",{code:u.SM.LAUNCHER_CONTROLLER_CONNECTION_SETUP,severity:t})}));try{yield Promise.race([n,i])}catch(e){this._connectionError=e,this._connectionPromise.resolve(),this._errorReporter(e)}}))}}class Pe{constructor(e,t,n,i,s,o,r){this._sessionService=e,this._urls=t,this._window=n,this._constants=i,this._recogniserAccessor=s,this._initOptions=o,this._storageService=r,this._controllerFrame=this._window.document.createElement("iframe"),this._controllerFrame.id=se,this._controllerFrame.name=this._createControllerName(),this._controllerFrame.title="No content",this._controllerFrame.sandbox.add("allow-scripts"),this._controllerFrame.sandbox.add("allow-same-origin"),this._controllerFrame.style.display="none",this._controllerFrame.setAttribute("aria-hidden","true"),this._controllerFrame.setAttribute(u.kg.FRAME_TYPE,"controller"),o.serviceUrlOverride?this._controllerFrame.src=`${o.serviceUrlOverride}/wsdk/controller/index.html`:this._controllerFrame.src=this._urls.CONTROLLER_URL}append(){return pe(this,void 0,void 0,(function*(){const e=this._window.document.body||this._window.document.head,t=new Promise((e=>this._controllerFrame.onload=e));e.appendChild(this._controllerFrame),yield t}))}getWindow(){if(!this._controllerFrame.contentWindow)throw new Error("Tried to get controller frame before it was loaded");return this._controllerFrame.contentWindow}_createControllerName(){var e,t,n,i,s;const o=new URLSearchParams,r=[["name",se],["launcherVersion",this._constants.VERSION],["sessionRecogniser",JSON.stringify(this._recogniserAccessor.getRecogniser())],["initTimestamp",null===(e=this._sessionService.initTimestamp)||void 0===e?void 0:e.toISOString()],["launcherInstanceId",this._sessionService.launcherInstanceId],["noFunctional",null===(t=this._sessionService.noFunctional)||void 0===t?void 0:t.toString()],["noTargeting",null===(n=this._sessionService.noTargeting)||void 0===n?void 0:n.toString()],["doNotShareOrSell",null===(i=this._sessionService.doNotShareOrSell)||void 0===i?void 0:i.toString()],["sandbox",null===(s=this._sessionService.sandbox)||void 0===s?void 0:s.toString()],["tagId",this._sessionService.tagId],["integrationType",this._sessionService.integrationType],["sessionId",this._sessionService.sessionId],["sessionInformation",this._sessionService.sessionInformation],["customHeaders",JSON.stringify(this._sessionService.customHeaders)],["url",this._window.location.href],["integration",this._initOptions.integrationName],["serviceUrlOverride",this._initOptions.serviceUrlOverride]];return this._shouldSetExperiencesFlag()&&r.push(["useExperiences","true"]),r.forEach((e=>{const[t,n]=e;void 0!==n&&""!==n&&o.append(t,n)})),o.toString()}_shouldSetExperiencesFlag(){return"true"===this._storageService.getItem("rokt-use-experiences")||!!this._sessionService.customHeaders&&!!this._sessionService.customHeaders["rokt-use-experiences"]}}class Oe{constructor(){this._subject=new l.xQ,this._observable=this._subject.asObservable()}on(e){return(0,d.zG)(this._observable)((0,d.hX)((({event:t})=>e===t||"*"===e)))}emit(e,t){this._subject.next({event:e,body:t})}}class Ce{constructor(e,t,n="Unspecified"){this._errorReporter=e,this._controllerConnection=t,this._integrationName=n}log(e){return pe(this,void 0,void 0,(function*(){yield this._controllerConnection.send("[C] LOG",{body:e})}))}raiseError(e){return pe(this,void 0,void 0,(function*(){e.severity=t,yield this.raiseIssue(e)}))}raiseWarning(e){return pe(this,void 0,void 0,(function*(){e.severity=s,yield this.raiseIssue(e)}))}raiseIssue(e){return pe(this,void 0,void 0,(function*(){if(!this._controllerConnection.hasConnected)return this._errorReporter(e);try{const n=e.severity||t;yield this._controllerConnection.send(ne,{body:{additionalInformation:e.additionalInformation,code:e.code,level:n,integration:e.integration||this._integrationName,message:e.message||"Launcher error raised.",name:e.name||"LauncherError",reporter:"WSDK",severity:n,stack:e.stack,handled:e.handled}})}catch(t){this._errorReporter(e)}}))}}class Le{constructor(e,t,n,i="Unspecified"){this._integrationName=i,this._controllerConnection=e,this._windowRef=t,this._sessionService=n}trigger(e,t=!1){return pe(this,void 0,void 0,(function*(){try{yield this._controllerConnection.send("[C] PUT_METRIC_EVENT",{body:Object.assign(Object.assign({},e),{timestamp:e.timestamp.toISOString(),launcherInstanceId:this._sessionService.launcherInstanceId,pageInstanceId:t&&this._sessionService.pageInstanceId||e.pageInstanceId||void 0,data:Object.assign({},e.data)})})}catch(e){}}))}triggerPageStart(e){var t,n;return pe(this,void 0,void 0,(function*(){const i=null===(n=null===(t=this._windowRef.performance)||void 0===t?void 0:t.timing)||void 0===n?void 0:n.responseStart;(e||i&&!(Date.now()-i>36e5))&&(yield this.trigger({type:u.D9.PAGE_START,timestamp:e||new Date(i)},!0))}))}triggerIntegrationStart(e=new Date){return pe(this,void 0,void 0,(function*(){const t={integrationName:this._integrationName};yield Promise.all([this.trigger({type:u.D9.INTEGRATION_START,timestamp:e,data:t},!0),this.trigger({type:u.D9.ROKT_START,timestamp:e},!0)])}))}triggerLauncherStart(e){return pe(this,void 0,void 0,(function*(){yield this.trigger({type:u.D9.LAUNCHER_START,timestamp:e||new Date})}))}triggerControllerFrameCreated(){return pe(this,void 0,void 0,(function*(){yield this.trigger({type:u.D9.CONTROLLER_FRAME_CREATED,timestamp:new Date})}))}triggerSelectionStart(e,t){return pe(this,void 0,void 0,(function*(){yield this.trigger({type:u.D9.SELECTION_START,timestamp:t,pageInstanceId:e})}))}triggerSelectionEnd(e){return pe(this,void 0,void 0,(function*(){yield this.trigger({type:u.D9.SELECTION_END,timestamp:new Date,pageInstanceId:e})}))}triggerPluginFrameCreated(e,t){return pe(this,void 0,void 0,(function*(){const n={type:u.D9.PLUGIN_FRAME_CREATED,timestamp:new Date,pluginAlias:e,pluginInstanceId:t};yield this.trigger(Object.assign(Object.assign({},n),{type:u.D9.PLUGIN_FRAME_CREATED}),!0),yield this.trigger(Object.assign(Object.assign({},n),{type:u.D9.PLUGIN_RUNTIME_FRAME_CREATED}),!0)}))}}var xe,Ue;!function(e){e.TEMPLATE_LOAD_ERROR_EVENT="template-load-error-event",e.TEMPLATE_RENDERED_EVENT="template-rendered-event",e.SET_TEMPLATE_NAME="set-template-name"}(xe||(xe={})),function(e){e.RoktTemplateReady="rokt-template-ready",e.NoTemplateAssigned="no-template-assigned",e.Timeout="timeout"}(Ue||(Ue={}));class De{constructor(e){this._windowRef=e}isTemplateReady(){return De._isTemplateReadyPromise.promise}init(e){var t;(null===(t=De._isTemplateReadyPromise)||void 0===t?void 0:t.isPending())||(De._isTemplateReadyPromise=new v,this._listenToPartnerContentTemplateMessages()),this._windowRef.postMessage({type:u.tw.RoktWSDKIntegration,payload:{type:xe.SET_TEMPLATE_NAME,payload:e.partnerContentTemplate||""}},this._windowRef.location.origin),e.partnerContentTemplate||De._isTemplateReadyPromise.resolve(Ue.NoTemplateAssigned)}_listenToPartnerContentTemplateMessages(){let e=l.ZT;Promise.race([(()=>new Promise((t=>{e=({origin:e,data:n})=>{if(e===this._windowRef.location.origin&&(null==n?void 0:n.type)===u.tw.RoktWSDKIntegration){const{type:e}=n.payload;[xe.TEMPLATE_RENDERED_EVENT,xe.TEMPLATE_LOAD_ERROR_EVENT].includes(e)&&t(Ue.RoktTemplateReady)}},this._windowRef.addEventListener("message",e)})))(),new Promise((e=>setTimeout(e,5e3,Ue.Timeout)))]).then((e=>{De._isTemplateReadyPromise.isPending()&&De._isTemplateReadyPromise.resolve(e)})).finally((()=>{this._windowRef.removeEventListener("message",e)}))}}class Me{constructor(e,t){this._urls=e,this._windowRef=t}preloadPluginRuntime(){return pe(this,void 0,void 0,(function*(){return this._createPreloadIframe(this._urls.PLUGIN_RUNTIME_URL)}))}preloadPlugins(){return pe(this,void 0,void 0,(function*(){yield Promise.all([this._createPreloadIframe(this._urls.WIDGET_PLUGIN_URL),this._createPreloadIframe(this._urls.DCUI_PLUGIN_URL)])}))}_createPreloadIframe(e){return pe(this,void 0,void 0,(function*(){const t=new URLSearchParams;t.append("integration_type","preload"),t.append("init_timestamp",String((new Date).getTime()));const n=t.toString(),i=this._windowRef.document.createElement("iframe");i.style.display="none",i.name=n,i.src=e;const s=new Promise((e=>i.onload=e)),o=this._windowRef.document.body||this._windowRef.document.head;o.appendChild(i),yield s,i.onload=null,o.removeChild(i)}))}}class ke{constructor(e,t){this._storage=e,this._cookie=t}getReferralId(){var e,t;return null!==(t=null!==(e=this._storage.getItem(u.cZ))&&void 0!==e?e:this._storage.getItem(u.aK))&&void 0!==t?t:this._cookie.getCookie(u.aK)}}class Ge{constructor(e){const t=e[e.INTEGRATION_WSDK_TARGET];this.CONTROLLER_URL=`${t}/wsdk/controller/index.html`,this.PLUGIN_RUNTIME_URL=`${t}/wsdk/plugin-runtime/index.html`,this.WIDGET_PLUGIN_URL=`${t}/wsdk/plugins/widget/index.html`,this.DCUI_PLUGIN_URL=`${t}/wsdk/plugins/dcui/index.html`}}class Fe{constructor(e,t){this._sessionAccessor=t,this.initTimestamp=e.initTimestamp||new Date,this.integrationType=e.integrationType||u.c8.WN.Default,this.noFunctional=e.noDeviceId||e.noFunctional||!1,this.noTargeting=e.noDeviceId||e.noTargeting||!1,this.doNotShareOrSell=e.doNotShareOrSell||!1,this.sandbox=e.sandbox||!1,this.sessionId=this._getSessionId(e),this.sessionInformation=this._getSessionInformationCookie(),this.tagId=e.tagId,this.pageInstanceId=e.pageInstanceId||this.getNewPageInstanceGuid(),this.launcherInstanceId=fe(),this.customHeaders=e.customHeaders}resetPageId(){this.pageInstanceId=this.getNewPageInstanceGuid()}getNewPageInstanceGuid(){return fe()}_getSessionId(e){return e.sessionId||""}_getSessionInformationCookie(){return this._sessionAccessor.getSessionInformationCookie()}}class We{constructor(e,t){this.initOptions=e,this.window=T(),this.constants=(()=>{let e;return e=void 0==={VERSION:"3.8.0",ORIGIN_ROKT_APPS:"https://apps.rokt.com",ORIGIN_ROKT_WSDK:"https://wsdk.rokt.com",INTEGRATION_WSDK_TARGET:"ORIGIN_ROKT_APPS"}?{VERSION:me||"",ORIGIN_ROKT_APPS:"",ORIGIN_ROKT_WSDK:"",INTEGRATION_WSDK_TARGET:"ORIGIN_ROKT_APPS"}:{VERSION:"3.8.0",ORIGIN_ROKT_APPS:"https://apps.rokt.com",ORIGIN_ROKT_WSDK:"https://wsdk.rokt.com",INTEGRATION_WSDK_TARGET:"ORIGIN_ROKT_APPS"},e.VERSION=me||e.VERSION,e})(),this.controllerConnection=new Ne(t,this.constants),this.logger=new Ce(t,this.controllerConnection,this.initOptions.integrationName),this.eventsService=new Oe,this.cookieService=new g(this.window),this.localStorageService=new S(this.window),this.sessionAccessor=new b(this.initOptions.tagId,this.cookieService),this.recogniserAccessor=new R(this.cookieService,this.localStorageService),this.referralService=new ke(this.localStorageService,this.cookieService),this.urls=new Ge(this.constants),this.preloadService=new Me(this.urls,this.window),this.fulfillmentAttributeService=new Re,this.sessionService=new Fe(this.initOptions,this.sessionAccessor),this.controllerFrame=new Pe(this.sessionService,this.urls,this.window,this.constants,this.recogniserAccessor,this.initOptions,this.localStorageService),this.controllerService=new Ae(this.window,this.controllerConnection,this.fulfillmentAttributeService,this.sessionService,this.eventsService,this.referralService),this.metricsService=new Le(this.controllerConnection,this.window,this.sessionService,this.initOptions.integrationName),this.placementsStream=new Se(this.controllerConnection),this.partnerContentTemplateService=new De(this.window)}}class je{constructor(e){var t,n;const i=new Date;var s;this._initOptions=e,this._initOptions.integrationVersion&&(s=this._initOptions.integrationVersion,me=s),this.fromController=new l.xQ;const o=((e,t=!1,n="Unspecified")=>i=>{(0,r.reportError)({tagId:e,useSandbox:t,integration:n,reporter:i.reporter||"WSDK",message:i.message,name:i.name,stack:i.stack,additionalInformation:i.additionalInformation,code:i.code,severity:i.severity})})(e.tagId,e.sandbox,this._initOptions.integrationName);try{this.services=new We(this._initOptions,o);const{controllerConnection:e,controllerFrame:s,eventsService:r,metricsService:a,placementsStream:c,preloadService:d,sessionService:v}=this.services;this._initOptions.sandbox&&this.services.window.console.warn("ROKT: 'sandbox' mode enabled. ROKT Placements shown will not generate revenue. If this is not intended then please omit the 'sandbox' flag when initializing ROKT's SDK."),s.append().then((()=>e.connect(s.getWindow()))).catch((e=>{throw e.code=e.code||u.SM.LAUNCHER_CONTROLLER_CONNECTION,o(e),e})),a.triggerControllerFrameCreated(),this._initOptions.skipPreload||(d.preloadPluginRuntime(),d.preloadPlugins()),a.triggerPageStart(null!==(t=this._initOptions.pageInitTimestamp)&&void 0!==t?t:void 0),a.triggerIntegrationStart(null!==(n=this._initOptions.initTimestamp)&&void 0!==n?n:i),a.triggerLauncherStart(i),e.on(u.Cs.PUT_DISPLAY_SETTINGS,c.middleware()),e.on(u.Cs.CLOSE_PLACEMENT,c.middleware()),e.on(u.Cs.FAILED_TO_LOAD_PLUGIN,c.middleware()),e.on(u.Cs.PLUGIN_RESIZED,c.middleware()),e.on(u.Cs.PLUGIN_TO_PARTNER,h,c.middleware()),e.on(u.Cs.GET_FULFILLMENT_ATTRIBUTES,(({fulfillmentAttributeService:e})=>t=>{const n=e.getFulfillmentAttributes();t.send({fulfillmentAttributes:n})})(this.services)),e.on(u.Cs.SEND_LAUNCHER_EVENT,(({eventsService:e})=>t=>{const n=t.getBody();n&&n.name&&e.emit(n.name,n.payload),t.send()})(this.services)),e.on(u.Cs.SET_FIRST_PARTY_RECOGNISER,(({recogniserAccessor:e})=>t=>{const n=t.getBody();e.setRecogniser(n.firstPartyRecogniser),t.send()})(this.services)),e.on("[L] SET_SESSION_ID",(()=>e=>e.send())),e.on(u.Cs.ATTRIBUTES_CAPTURE_RESULT,(({eventsService:e})=>t=>{t.getBody().isSuccess?e.emit(u.tw.AttributesCapture):e.emit(u.tw.AttributesCaptureFailure),t.send()})(this.services)),e.on(u.Cs.CONTROLLER_TO_PARTNER,(e=>this.fromController.next(e.getBody())),h),e.on(u.Cs.CREATE_PLUGIN,(e=>{var t=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}(e,[]);return e=>{const n=e.getBody();new we(n,t,l.bf,void 0,void 0,t.initOptions.serviceUrlOverride).place(),e.send()}})(this.services)),r.on(u.c8.tw.SessionInformationUpdated).subscribe((e=>this.services.sessionAccessor.setSessionInformationCookie(e.body))),r.on(u.c8.tw.SessionIdUpdated).subscribe((e=>{v.sessionId=e.body}))}catch(e){throw e.code=e.code||u.SM.LAUNCHER_INIT,o(e),e}}on(e){const t=this.services.eventsService;return(0,d.zG)((0,l.TS)(this.fromController,t.on("*")))((0,d.hX)((t=>"*"===e||t.event===e)))}log(e){return pe(this,void 0,void 0,(function*(){const{logger:t}=this.services;yield t.log(e)}))}raiseError(e){return pe(this,void 0,void 0,(function*(){const{logger:t}=this.services;yield t.raiseIssue(e)}))}ready(){return pe(this,void 0,void 0,(function*(){const{controllerConnection:e}=this.services;yield e.onConnection()}))}selectPlacements({attributes:e,pageIdentifier:t,omitUrl:n}){return pe(this,void 0,void 0,(function*(){const{controllerConnection:i,controllerService:r,sessionService:a,metricsService:c,partnerContentTemplateService:d}=this.services;yield i.onSetupComplete();const h=new Date;if(a.pageInstanceId===this.previousPageInstanceId){const e=u.SM.LAUNCHER_DUPLICATE_SELECT_PLACEMENTS;throw new o(e,{code:e,severity:s})}const v=yield r.selectPlacements(e,t,n),f=v.context;d.init(f),this.previousPageInstanceId=a.pageInstanceId;const p=v.placements.map((e=>new we(e,this.services,l.bf,void 0,void 0,this.services.initOptions.serviceUrlOverride))),_=new Ie(f,p,r);return c.triggerSelectionStart(a.pageInstanceId,h),c.triggerSelectionEnd(a.pageInstanceId),_}))}destroy(){(e=>e.querySelectorAll(`[${u.kg.FRAME_TYPE}]`))(window.document).forEach((e=>{var t;return null===(t=null==e?void 0:e.parentNode)||void 0===t?void 0:t.removeChild(e)})),this.services.window[_e]=void 0}changePage(e){var t;const n=new Date;this.services.sessionService.resetPageId(),this.services.metricsService.triggerPageStart(null!==(t=null==e?void 0:e.pageInitTimestamp)&&void 0!==t?t:n),this.services.metricsService.triggerIntegrationStart(n)}}const Ve="Value to be hashed must be of type string";u.Xy,u.tw;var He,ze,Ke,$e,Be,Ye,Xe,Ze,qe,Qe,Je,et=n(809),tt=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))},nt=function(e,t,n,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(e,n):s?s.value=n:t.set(e,n),n},it=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class st{constructor(e,t,n,i,s,o,r){He.add(this),ze.set(this,void 0),Ke.set(this,void 0),$e.set(this,void 0),Be.set(this,void 0),Ye.set(this,void 0),Xe.set(this,void 0),Ze.set(this,void 0),qe.set(this,void 0),Qe.set(this,void 0),nt(this,ze,e,"f"),nt(this,Ke,t,"f"),nt(this,$e,n,"f"),nt(this,Be,i,"f"),nt(this,Ye,s,"f"),nt(this,Xe,o,"f"),nt(this,Ze,r,"f"),nt(this,Qe,!1,"f");const a=Math.random()<.05&&this._isWhitelistedForLogging();this.functionalityLogger=(e,t)=>{a&&it(this,Ye,"f").log({code:"integration-launcher-functionality",additionalInformation:{className:e,methodUsed:t}})},(it(this,Ke,"f").hasPassedNoFunctional||it(this,Ke,"f").hasPassedNoTargeting)&&this.functionalityLogger("IntegrationLauncher","hasPassedCPRAFlag")}captureConversion(e){return tt(this,void 0,void 0,(function*(){this.functionalityLogger("IntegrationLauncher","captureConversion");const t=(yield it(this,He,"m",Je).call(this,e)).placements.getAll();t&&t.length>0&&it(this,$e,"f").raise(new o("",{code:"SELECTION_MADE_FOR_CONVERSION",severity:s}))}))}hashAttributes(e){return tt(this,void 0,void 0,(function*(){return this.functionalityLogger("IntegrationLauncher","hashAttributes"),it(this,ze,"f").hash(e)}))}isTerminated(){return this.functionalityLogger("IntegrationLauncher","isTerminated"),it(this,Qe,"f")}selectPlacements(e){if(it(this,qe,"f")){it(this,qe,"f").close();const e=new o("Multiple simultaneous selections triggered. Please wait for the previous Rokt selection to complete before triggering another selection in order to avoid unintended side effects.",{code:"SIMULTANEOUS_SELECTION",severity:s});throw it(this,$e,"f").raise(e),e}return nt(this,qe,it(this,Xe,"f").call(this,it(this,He,"m",Je).call(this,e),this.functionalityLogger),"f"),it(this,Be,"f").emit(et.t.SelectionCreated,{selection:it(this,qe,"f")}),Promise.resolve(it(this,qe,"f"))}terminate(){return tt(this,void 0,void 0,(function*(){this.functionalityLogger("IntegrationLauncher","terminate"),yield it(this,Ye,"f").destroy(),nt(this,Qe,!0,"f")}))}get version(){return this.functionalityLogger("IntegrationLauncher","get version"),it(this,Ke,"f").version}use(e){return this.functionalityLogger("IntegrationLauncher","use"),it(this,Ze,"f").use(e)}_isWhitelistedForLogging(){return this._isEnableForPartners(it(this,Ke,"f").alphaReleaseWhitelist)}_isEnableForPartners(e){const t=e.split(",").filter((e=>!!e));return!!it(this,Ke,"f").accountId&&t.includes(it(this,Ke,"f").accountId)}}ze=new WeakMap,Ke=new WeakMap,$e=new WeakMap,Be=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,Ze=new WeakMap,qe=new WeakMap,Qe=new WeakMap,He=new WeakSet,Je=function(e){return tt(this,void 0,void 0,(function*(){it(this,Ye,"f").changePage();const t=yield it(this,Ye,"f").selectPlacements({attributes:e.attributes,pageIdentifier:e.identifier,omitUrl:e.omitUrl});return nt(this,qe,void 0,"f"),t}))};var ot,rt=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))},at=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class ct{constructor(e){ot.set(this,void 0),function(e,t,n,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===i?s.call(e,n):s?s.value=n:t.set(e,n)}(this,ot,e,"f"),this.id=e.getAlias(),this.element=e.getElement()}close(){return at(this,ot,"f").remove()}on(e){return(0,d.zG)(at(this,ot,"f").on(e))((0,d.UI)((({event:e,body:t})=>({body:t,event:e,placement:this}))))}ready(){return rt(this,void 0,void 0,(function*(){yield at(this,ot,"f").onDisplay()}))}send(e,t){return rt(this,void 0,void 0,(function*(){return yield this.ready(),at(this,ot,"f").send(e,t)}))}}ot=new WeakMap;var lt,dt=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class ht{constructor(e){lt.set(this,void 0),function(e,t,n,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===i?s.call(e,n):s?s.value=n:t.set(e,n)}(this,lt,e,"f")}get pageId(){return(0,l.zq)(dt(this,lt,"f")).then((e=>e.pageId))}get pageInstanceGuid(){return(0,l.zq)(dt(this,lt,"f")).then((e=>e.pageInstanceGuid))}get pageVariantName(){return(0,l.zq)(dt(this,lt,"f")).then((e=>e.pageVariantName))}get sessionId(){return(0,l.zq)(dt(this,lt,"f")).then((e=>e.sessionId))}get partnerContentTemplate(){return(0,l.zq)(dt(this,lt,"f")).then((e=>e.partnerContentTemplate||""))}}lt=new WeakMap;var ut,vt,ft,pt=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))},_t=function(e,t,n,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(e,n):s?s.value=n:t.set(e,n),n},mt=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class Et{constructor(e,t){this.functionalityLogger=t,ut.set(this,void 0),vt.set(this,void 0),ft.set(this,void 0),_t(this,ut,new l.xQ,"f"),_t(this,vt,new l.tq(1),"f"),_t(this,ft,new l.tq(1),"f"),(0,l.p4)(e).subscribe(mt(this,vt,"f")),(0,d.zG)((0,l.TS)((0,d.zG)(mt(this,ut,"f"))((0,d.UI)((()=>[]))),(0,d.zG)(mt(this,vt,"f"))((0,d.bw)((e=>e.placements.placeAll())),(0,d.UI)((e=>e.placements.getAll())),(0,d.UI)((e=>e.map((e=>new ct(e))))))))((0,d.Ps)()).subscribe(mt(this,ft,"f")),this.context=new ht((0,d.zG)(mt(this,vt,"f"))((0,d.UI)((e=>e.context))))}close(){return pt(this,void 0,void 0,(function*(){this.functionalityLogger("Selection","close"),(0,d.zG)((0,l.TS)((0,d.zG)(mt(this,vt,"f"))((0,d.bw)((e=>e.placements.removeAll()))),mt(this,ut,"f")))((0,d.Ps)()).subscribe(l.ZT,l.ZT),yield f(0),mt(this,ut,"f").next()}))}getPlacements(){return pt(this,void 0,void 0,(function*(){return this.functionalityLogger("Selection","getPlacements"),(0,l.zq)(mt(this,ft,"f")).then((e=>e))}))}on(e){this.functionalityLogger("Selection","on");const t=new l.xQ;return this.getPlacements().then((t=>t.map((t=>t.on(e))))).then((e=>(0,l.TS)(...e).subscribe(t))).catch((e=>t.error(e))),t.asObservable()}ready(){return pt(this,void 0,void 0,(function*(){this.functionalityLogger("Selection","ready");const e=yield(0,l.zq)(mt(this,vt,"f")).then((e=>e));yield e.placements.onDisplay()}))}send(e,t){return pt(this,void 0,void 0,(function*(){this.functionalityLogger("Selection","send");const n=yield(0,l.zq)(mt(this,vt,"f")).then((e=>e));return yield this.ready(),n.placements.send(e,t)}))}setAttributes(e){return pt(this,void 0,void 0,(function*(){return this.functionalityLogger("Selection","setAttributes"),(yield(0,l.zq)(mt(this,vt,"f")).then((e=>e))).setAttributes(e)}))}}ut=new WeakMap,vt=new WeakMap,ft=new WeakMap;var gt=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class Tt{constructor(e){this._errorService=e}hash(e){return gt(this,void 0,void 0,(function*(){const t={};try{const n=Object.entries(e).filter((([e,t])=>null!=t&&""!==t)).map((([e,n])=>gt(this,void 0,void 0,(function*(){const i=`${e}sha256`,s=yield(e=>pe(void 0,void 0,void 0,(function*(){if("string"!=typeof e)throw new Error(Ve);return P(e.trim().toLocaleLowerCase())})))(String(n));t[i]=s}))));return yield Promise.all(n),t}catch(e){throw e.code="HASHING_FAILED",e.severity=s,this._errorService.raise(e),e}}))}}const wt=new v,St=()=>wt.promise,yt=((n,i,l,d,h,u)=>{let v;return n=>{return i=void 0,d=void 0,u=function*(){const i=new Date,d=new class{constructor(){this.integration="integration-launcher",this.version="2.2.0",this.alphaReleaseWhitelist="2767239010829248611,167,3090263514046316399,3058888232488158033"}set(e){e||this._throw("Please provide an options object",c),e.accountId||this._throw("Please provide your account id",a),this.accountId=e.accountId,this.hasPassedNoTargeting=void 0!==(null==e?void 0:e.noTargeting),this.hasPassedNoFunctional=void 0!==(null==e?void 0:e.noFunctional)}_throw(e,t){throw new o(e,{code:t,severity:s})}},h=new class{constructor(e){this._reporter=e}raise(e){return this._reporter(e)}updateReporter(e){this._reporter=e}}((e=>t=>(0,r.reportError)({additionalInformation:t.additionalInformation,code:t.code,integration:e.integration,message:t.message,name:t.name,reporter:t.reporter||"WSDK",severity:t.severity,stack:t.stack,tagId:e.accountId,handled:t.handled}))(d)),u=n;try{if(v&&!v.isTerminated())throw new o("Integration Launcher already created",{code:"SECOND_INSTANCE",severity:s});if(!function(){const e=W();switch(null==e?void 0:e.name){case"chrome":return parseFloat(null==e?void 0:e.version)>=52;case"ie":case"safari":case"ios":return parseFloat(null==e?void 0:e.version)>=11;case"ios-webview":return parseFloat(null==e?void 0:e.version)>=604;default:return!0}}())throw new o("Not supported browser",{code:"BROWSER_NOT_SUPPORTED",severity:s});d.set(n);const{accountId:t,noFunctional:r,noTargeting:a,doNotShareOrSell:c}=n,p=yield(f=Object.assign({integrationName:"integration-launcher",initTimestamp:i,tagId:t,noFunctional:r,noTargeting:a,doNotShareOrSell:c,integrationVersion:`IL-${d.version}`},u),pe(void 0,void 0,void 0,(function*(){return window[_e]&&!window["__rokt-launcher-allow-multiple__"]||(window[_e]=Promise.resolve(new je(f))),window[_e]})));yield p.ready(),h.updateReporter((e=>p.raiseError(e)));const{attributesService:_,eventsService:m}=yield((e,t,n)=>({attributesService:new Tt(n),config:t,eventsService:new et.n}))(0,d,h);return v=new st(_,d,h,m,p,l,new class{constructor(e,t){this._extensions=e,this._container=t,this._cache={}}use(e){return t=this,n=void 0,s=function*(){if(this._extensions[e]){if(this._cache[e])return this._cache[e];const t=yield this._extensions[e]();return this._cache[e]=new t(this._container),this._cache[e]}throw new Error("Unknown extension name")},new((i=void 0)||(i=Promise))((function(e,o){function r(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}c((s=s.apply(t,n||[])).next())}));var t,n,i,s}}(e,{eventsService:m})),v}catch(e){throw e.code=e.code||"INITIALIZATION_ERROR",e.severity=e.severity||t,h.raise(e),e}var f},new((h=void 0)||(h=Promise))((function(e,t){function n(e){try{o(u.next(e))}catch(e){t(e)}}function s(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){var i;t.done?e(t.value):(i=t.value,i instanceof h?i:new h((function(e){e(i)}))).then(n,s)}o((u=u.apply(i,d||[])).next())}));var i,d,h,u}})(0,0,(function(e,t){return new Et(e,t)})),It=(e=>t=>{const n=e(t);return n.then(wt.resolve,wt.reject),n})(yt)})(),window.Rokt=i})();